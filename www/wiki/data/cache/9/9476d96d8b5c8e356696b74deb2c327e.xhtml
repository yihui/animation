


<h1><a name="miscellaneous_functions_in_package_animation" id="miscellaneous_functions_in_package_animation">Miscellaneous functions in package animation</a></h1>
<div class="level1">

<p>

Some of these functions are occasionally used in my daily life, and some are the implementations of my quick ideas when I see something interesting (like the visual illusions).
</p>

</div>
<!-- SECTION "Miscellaneous functions in package animation" [1-238] -->
<h2><a name="tidy_up_r_source" id="tidy_up_r_source">&quot;Tidy up&quot; R source</a></h2>
<div class="level2">

<p>

The function <code>tidy.source()</code> is defined as:
</p>
<pre class="code r"><span class="re3"> &gt;</span> tidy.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=source"><span class="kw4">source</span></a>
<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=function"><span class="kw1">function</span></a><span class="br0">&#40;</span><span class="re5">source</span> = <span class="st0">&quot;clipboard&quot;</span>, keep<span class="re5">.comment</span> = <span class="re1">TRUE\</span>, 
    keep.blank<span class="re5">.line</span> = <span class="re1">FALSE\</span>, begin<span class="re5">.comment</span>, <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=end"><span class="kw3">end</span></a><span class="re5">.comment</span>, ...<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    tidy<span class="re5">.block</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=function"><span class="kw1">function</span></a><span class="br0">&#40;</span>block.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="re5">exprs</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=parse"><span class="kw4">parse</span></a><span class="br0">&#40;</span><span class="re5">text</span> = block.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a><span class="br0">&#41;</span>
        <span class="re5">n</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=length"><span class="kw3">length</span></a><span class="br0">&#40;</span>exprs<span class="br0">&#41;</span>
        <span class="re5">res</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=character"><span class="kw4">character</span></a><span class="br0">&#40;</span>n<span class="br0">&#41;</span>
        <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=for"><span class="kw1">for</span></a> <span class="br0">&#40;</span>i <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=in"><span class="kw1">in</span></a> <span class="nu0">1</span>:n<span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <span class="re5">dep</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=paste"><span class="kw4">paste</span></a><span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=deparse"><span class="kw4">deparse</span></a><span class="br0">&#40;</span>exprs<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span>, <span class="re5">collapse</span> = <span class="st0">&quot;<span class="es0">\n</span>&quot;</span><span class="br0">&#41;</span>
            res<span class="br0">&#91;</span>i<span class="br0">&#93;</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=substring"><span class="kw4">substring</span></a><span class="br0">&#40;</span><span class="re5">dep</span>, <span class="nu0">12</span>, <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=nchar"><span class="kw4">nchar</span></a><span class="br0">&#40;</span>dep<span class="br0">&#41;</span> - <span class="nu0">1</span><span class="br0">&#41;</span>
        <span class="br0">&#125;</span>
        <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=return"><span class="kw4">return</span></a><span class="br0">&#40;</span>res<span class="br0">&#41;</span>
    <span class="br0">&#125;</span>
    <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a><span class="re5">.lines</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=readLines"><span class="kw4">readLines</span></a><span class="br0">&#40;</span><span class="re5">source</span>, <span class="re5">warn</span> = <span class="re1">FALSE\</span><span class="br0">&#41;</span>
    <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=if"><span class="kw1">if</span></a> <span class="br0">&#40;</span>keep.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=comment"><span class="kw4">comment</span></a><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="re5">identifier</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=function"><span class="kw1">function</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=paste"><span class="kw4">paste</span></a><span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=sample"><span class="kw4">sample</span></a><span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=LETTERS"><span class="kw4">LETTERS</span></a><span class="br0">&#41;</span>, <span class="re5">collapse</span> = <span class="st0">&quot;&quot;</span><span class="br0">&#41;</span>
        <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=if"><span class="kw1">if</span></a> <span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=missing"><span class="kw4">missing</span></a><span class="br0">&#40;</span>begin.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=comment"><span class="kw4">comment</span></a><span class="br0">&#41;</span><span class="br0">&#41;</span> 
            begin<span class="re5">.comment</span> = identifier<span class="br0">&#40;</span><span class="br0">&#41;</span>
        <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=if"><span class="kw1">if</span></a> <span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=missing"><span class="kw4">missing</span></a><span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=end"><span class="kw3">end</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=comment"><span class="kw4">comment</span></a><span class="br0">&#41;</span><span class="br0">&#41;</span> 
            <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=end"><span class="kw3">end</span></a><span class="re5">.comment</span> = identifier<span class="br0">&#40;</span><span class="br0">&#41;</span>
        <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a><span class="re5">.lines</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=gsub"><span class="kw4">gsub</span></a><span class="br0">&#40;</span><span class="st0">&quot;^[[:space:]]+|[[:space:]]+$&quot;</span>, <span class="st0">&quot;&quot;</span>, 
            <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=lines"><span class="kw3">lines</span></a><span class="br0">&#41;</span>
        <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=while"><span class="kw1">while</span></a> <span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=length"><span class="kw3">length</span></a><span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=grep"><span class="kw4">grep</span></a><span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=sprintf"><span class="kw4">sprintf</span></a><span class="br0">&#40;</span><span class="st0">&quot;%s|%s&quot;</span>, begin<span class="re5">.comment</span>, <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=end"><span class="kw3">end</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=comment"><span class="kw4">comment</span></a><span class="br0">&#41;</span>, 
            <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=lines"><span class="kw3">lines</span></a><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            begin<span class="re5">.comment</span> = identifier<span class="br0">&#40;</span><span class="br0">&#41;</span>
            <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=end"><span class="kw3">end</span></a><span class="re5">.comment</span> = identifier<span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="br0">&#125;</span>
        <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=head"><span class="kw3">head</span></a><span class="re5">.comment</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=substring"><span class="kw4">substring</span></a><span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a><span class="re5">.lines</span>, <span class="nu0">1</span>, <span class="nu0">1</span><span class="br0">&#41;</span> == <span class="st0">&quot;#&quot;</span>
        <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=if"><span class="kw1">if</span></a> <span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=any"><span class="kw3">any</span></a><span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=head"><span class="kw3">head</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=comment"><span class="kw4">comment</span></a><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=lines"><span class="kw3">lines</span></a><span class="br0">&#91;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=head"><span class="kw3">head</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=comment"><span class="kw4">comment</span></a><span class="br0">&#93;</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=gsub"><span class="kw4">gsub</span></a><span class="br0">&#40;</span><span class="st0">&quot;<span class="es0">\&quot;</span>&quot;</span>, <span class="st0">&quot;'&quot;</span>, <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=lines"><span class="kw3">lines</span></a><span class="br0">&#91;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=head"><span class="kw3">head</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=comment"><span class="kw4">comment</span></a><span class="br0">&#93;</span><span class="br0">&#41;</span>
            <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=lines"><span class="kw3">lines</span></a><span class="br0">&#91;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=head"><span class="kw3">head</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=comment"><span class="kw4">comment</span></a><span class="br0">&#93;</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=sprintf"><span class="kw4">sprintf</span></a><span class="br0">&#40;</span><span class="st0">&quot;%s=<span class="es0">\&quot;</span>%s%s<span class="es0">\&quot;</span>&quot;</span>, 
                begin<span class="re5">.comment</span>, <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=lines"><span class="kw3">lines</span></a><span class="br0">&#91;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=head"><span class="kw3">head</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=comment"><span class="kw4">comment</span></a><span class="br0">&#93;</span>, <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=end"><span class="kw3">end</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=comment"><span class="kw4">comment</span></a><span class="br0">&#41;</span>
        <span class="br0">&#125;</span>
        blank<span class="re5">.line</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a><span class="re5">.lines</span> == <span class="st0">&quot;&quot;</span>
        <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=if"><span class="kw1">if</span></a> <span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=any"><span class="kw3">any</span></a><span class="br0">&#40;</span>blank.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=line"><span class="kw4">line</span></a><span class="br0">&#41;</span> &amp; keep.blank.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=line"><span class="kw4">line</span></a><span class="br0">&#41;</span> 
            <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=lines"><span class="kw3">lines</span></a><span class="br0">&#91;</span>blank.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=line"><span class="kw4">line</span></a><span class="br0">&#93;</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=sprintf"><span class="kw4">sprintf</span></a><span class="br0">&#40;</span><span class="st0">&quot;%s=<span class="es0">\&quot;</span>%s<span class="es0">\&quot;</span>&quot;</span>, begin<span class="re5">.comment</span>, 
                <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=end"><span class="kw3">end</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=comment"><span class="kw4">comment</span></a><span class="br0">&#41;</span>
        <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a><span class="re5">.tidy</span> = tidy.block<span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=lines"><span class="kw3">lines</span></a><span class="br0">&#41;</span>
        <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a><span class="re5">.tidy</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=gsub"><span class="kw4">gsub</span></a><span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=sprintf"><span class="kw4">sprintf</span></a><span class="br0">&#40;</span><span class="st0">&quot;%s = <span class="es0">\&quot;</span>|%s<span class="es0">\&quot;</span>&quot;</span>, begin<span class="re5">.comment</span>, 
            <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=end"><span class="kw3">end</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=comment"><span class="kw4">comment</span></a><span class="br0">&#41;</span>, <span class="st0">&quot;&quot;</span>, <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a>.tidy<span class="br0">&#41;</span>
    <span class="br0">&#125;</span>
    <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=else"><span class="kw1">else</span></a> <span class="br0">&#123;</span>
        <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a><span class="re5">.tidy</span> = tidy.block<span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=lines"><span class="kw3">lines</span></a><span class="br0">&#41;</span>
    <span class="br0">&#125;</span>
    <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=cat"><span class="kw4">cat</span></a><span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=paste"><span class="kw4">paste</span></a><span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a><span class="re5">.tidy</span>, <span class="re5">collapse</span> = <span class="st0">&quot;<span class="es0">\n</span>&quot;</span><span class="br0">&#41;</span>, <span class="st0">&quot;<span class="es0">\n</span>&quot;</span>, ...<span class="br0">&#41;</span>
    <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=invisible"><span class="kw4">invisible</span></a><span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a>.tidy<span class="br0">&#41;</span>
<span class="br0">&#125;</span></pre>
<p>
As you have seen, it&#039;s quite simple. When I write R code, I&#039;d like to “tidy” them up, because I don&#039;t want to type the spaces (either those around operators or those for indents). You just have to copy your code to the clipboard, then <code>tidy.source()</code>, and the (more standard) code will be printed in the console. For example, this is the original code:
</p>
<pre class="code r"><span class="re5">f</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=tempfile"><span class="kw4">tempfile</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>
<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=writeLines"><span class="kw4">writeLines</span></a><span class="br0">&#40;</span><span class="st0">'
 # rotation of the word &quot;Animation&quot;
# in a loop; change the angle and color
# step by step
for (i in 1:360) {
# redraw the plot again and again
plot(1,ann=FALSE,type=&quot;n&quot;,axes=FALSE)
# rotate; use rainbow() colors
text(1,1,&quot;Animation&quot;,srt=i,col=rainbow(360)[i],cex=7*i/360)
# pause for a while
Sys.sleep(0.01)}
'</span>, f<span class="br0">&#41;</span></pre>
<p>
And this is the “tidy” version:
</p>
<pre class="code r"><span class="re3"> &gt;</span> tidy.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=source"><span class="kw4">source</span></a><span class="br0">&#40;</span>f<span class="br0">&#41;</span>
<span class="co3"># rotation of the word 'Animation'</span>
<span class="co3"># in a loop; change the angle and color</span>
<span class="co3"># step by step</span>
<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=for"><span class="kw1">for</span></a> <span class="br0">&#40;</span>i <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=in"><span class="kw1">in</span></a> <span class="nu0">1</span>:<span class="nu0">360</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
   <span class="co3"># redraw the plot again and again</span>
   <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=plot"><span class="kw3">plot</span></a><span class="br0">&#40;</span><span class="nu0">1</span>, <span class="re5">ann</span> = <span class="re1">FALSE\</span>, <span class="re5">type</span> = <span class="st0">&quot;n&quot;</span>, <span class="re5">axes</span> = <span class="re1">FALSE\</span><span class="br0">&#41;</span>
   <span class="co3"># rotate; use rainbow() colors</span>
   <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a><span class="br0">&#40;</span><span class="nu0">1</span>, <span class="nu0">1</span>, <span class="st0">&quot;Animation&quot;</span>, <span class="re5">srt</span> = <span class="re5">i</span>, <span class="re5">col</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=rainbow"><span class="kw4">rainbow</span></a><span class="br0">&#40;</span><span class="nu0">360</span><span class="br0">&#41;</span><span class="br0">&#91;</span>i<span class="br0">&#93;</span>, <span class="re5">cex</span> = <span class="nu0">7</span> *
       i/<span class="nu0">360</span><span class="br0">&#41;</span>
   <span class="co3"># pause for a while</span>
   <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=Sys.sleep"><span class="kw2">Sys.sleep</span></a><span class="br0">&#40;</span><span class="nu0">0.01</span><span class="br0">&#41;</span>
<span class="br0">&#125;</span></pre>
</div>
<!-- SECTION "Tidy up R source" [239-3294] -->
<h2><a name="visual_illusions" id="visual_illusions">Visual Illusions</a></h2>
<div class="level2">

<p>

Perhaps visual illusions can inspire ideas in animations.
</p>

</div>
<!-- SECTION "Visual Illusions" [3295-3383] -->
<h3><a name="scintillating_grid_illusion" id="scintillating_grid_illusion">Scintillating grid illusion</a></h3>
<div class="level3">

<p>

White dots? Black dots?
</p>

</div>

<h4><a name="illusion" id="illusion">Illusion</a></h4>
<div class="level4">

<p>

<a href="/_detail/animation:scintillating_grid_illusion.png?id=animation%3Amisc" class="media" title="animation:scintillating_grid_illusion.png"><img src="/_media/animation:scintillating_grid_illusion.png" class="mediacenter" title="Scintillating grid illusion" alt="Scintillating grid illusion" /></a>
</p>

</div>

<h4><a name="r_code" id="r_code">R code</a></h4>
<div class="level4">
<pre class="code r"><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=vi"><span class="kw4">vi</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=grid"><span class="kw4">grid</span></a>.illusion<span class="br0">&#40;</span><span class="br0">&#41;</span></pre>
</div>
<!-- SECTION "Scintillating grid illusion" [3384-3596] -->
<h3><a name="hermann_grid_illusion" id="hermann_grid_illusion">Hermann grid illusion</a></h3>
<div class="level3">

<p>

Gray dots at the intersections?
</p>

</div>

<h4><a name="illusion1" id="illusion1">Illusion</a></h4>
<div class="level4">

<p>

<a href="/_detail/animation:hermann_grid_illusion.png?id=animation%3Amisc" class="media" title="animation:hermann_grid_illusion.png"><img src="/_media/animation:hermann_grid_illusion.png" class="mediacenter" title="Hermann grid illusion" alt="Hermann grid illusion" /></a>
</p>

</div>

<h4><a name="r_code1" id="r_code1">R code</a></h4>
<div class="level4">
<pre class="code r"><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=vi"><span class="kw4">vi</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=grid"><span class="kw4">grid</span></a>.illusion<span class="br0">&#40;</span><span class="re5">type</span> = <span class="st0">&quot;h&quot;</span>, <span class="re5">lwd</span> = <span class="nu0">22</span>, <span class="re5">nrow</span> = <span class="nu0">5</span>, <span class="re5">ncol</span> = <span class="nu0">5</span>, 
    <span class="re5">col</span> = <span class="st0">&quot;white&quot;</span><span class="br0">&#41;</span></pre>
</div>
<!-- SECTION "Hermann grid illusion" [3597-3859] -->
<h3><a name="lilac_chaser" id="lilac_chaser">Lilac Chaser</a></h3>
<div class="level3">

<p>

Green dots moving?
</p>

</div>

<h4><a name="animation" id="animation">Animation</a></h4>
<div class="level4">

<p>

<div align="center" class="anidemo" title="Visual Illusions: Lilac Chaser"><fieldset><legend align="center">Visual Illusions: Lilac Chaser</legend><div id="loadinglilac" class="loading">loading animation frames... 0%</div><div id="divPreloadlilac" class="divPreload"><script language="JavaScript" type="text/javascript">	var sourcelilac = "http://s288.photobucket.com/albums/ll181/xieyihui/lilac_chaser/";	var imgtypelilac = "png";	var tmplilac = 0;	var nmaxlilac=16; 	var nlilac=1;	var tlilac;	for(i = 1; i <= nmaxlilac; i++){		document.write("<div class=\"divFrame\" id=\"divPreload" + "lilac" + i + "\"><img src=\"" + sourcelilac + i + "." + imgtypelilac + "\"" + " id = \"img" + "lilac" + i + "\" onload = \"loading(\'lilac\')\" onerror = \"loading(\'lilac\')\" alt=\"Visual Illusions: Lilac Chaser\" title=\"Visual Illusions: Lilac Chaser\" /></div>");}</script></div><div class="btncontrol"><input name="nmaxlilac" type="hidden" id="nmaxlilac" value="16" /><input name="heightlilac" type="hidden" id="heightlilac" value="480" /><input name="btnPlaylilac" type="submit" disabled="disabled" class="anibutton" id="btnPlaylilac" title="Play" onclick="playAni('lilac')" value="  &gt;  " /> <input name="btnPauselilac" type="submit" disabled="disabled" class="anibutton" id="btnPauselilac" title="Pause" onclick="pauseAni('lilac')" value="  O  " /> <input name="btnFastlilac" type="submit" disabled="disabled" class="anibutton" id="btnFastlilac" title="Speed up" onclick="fastAni('lilac',1)" value="  +  " /> <input name="btnSlowlilac" type="submit" disabled="disabled" class="anibutton" id="btnSlowlilac" title="Slow down" onclick="fastAni('lilac',-1)" value="  -  " /> <input name="btnPrevlilac" type="submit" disabled="disabled" class="anibutton" id="btnPrevlilac" title="Previous frame" onclick="prevAni('lilac',1)" value="  &lt;&lt;  " /> <input name="btnNextlilac" type="submit" disabled="disabled" class="anibutton" id="btnNextlilac" title="Next frame" onclick="prevAni('lilac',-1)" value="  &gt;&gt;  " /> <input name="btnFirstlilac" type="submit" disabled="disabled" class="anibutton" id="btnFirstlilac" title="First frame" onclick="firstAni('lilac',true)" value="  |&lt;  " /> <input name="btnLastlilac" type="submit" disabled="disabled" class="anibutton" id="btnLastlilac" title="Last frame" onclick="firstAni('lilac',false)" value="  &gt;|  " /> <input name="btnMorelilac" type="submit" disabled="disabled" class="anibutton" id="btnMorelilac" title="More controls" onclick="btnMore('lilac')" value="  &lt;&gt;  " /></div><div id="moreParlilac" class="morepar"><label title="Which frame to go?" onmouseover="this.style.backgroundColor='#8cacbb'" onmouseout="this.style.backgroundColor='#ffffff'">View frame <input name="txtFramelilac" type="text" id="txtFramelilac" onblur="txtFrame(this.value, 'lilac')" value="1" size="4" class="text" />/16</label> <label title="Loop or not?" onmouseover="this.style.backgroundColor='#8cacbb'" onmouseout="this.style.backgroundColor='#ffffff'"><input name="checkLooplilac" type="checkbox" id="checkLooplilac" checked="checked"/>Loop</label> <label title="Time interval for the animation (in sec)" onmouseover="this.style.backgroundColor='#8cacbb'" onmouseout="this.style.backgroundColor='#ffffff'">Time Interval: <input name="txtIntervallilac" type="text" id="txtIntervallilac" onblur="txtInterval(this)" value="0.05" size="4" class="text" /></label> <label title="Increment in time interval" onmouseover="this.style.backgroundColor='#8cacbb'" onmouseout="this.style.backgroundColor='#ffffff'">Step: <input name="txtSteplilac" type="text" id="txtSteplilac" onblur="txtInterval(this)" value="0.1" size="4" class="text" /></label></div><hr /><div class="description">
Stare at the center cross for a few (say 30) seconds to experience the phenomena of the illusion.
</div></fieldset></div>
</p>

</div>

<h4><a name="r_code2" id="r_code2">R code</a></h4>
<div class="level4">
<pre class="code r"><span class="re5">oopt</span> = ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=options"><span class="kw4">options</span></a><span class="br0">&#40;</span>ani<span class="re5">.height</span> = <span class="nu0">480</span>, ani<span class="re5">.width</span> = <span class="nu0">480</span>, <span class="re5">outdir</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=getwd"><span class="kw4">getwd</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>, <span class="re5">nmax</span> = <span class="nu0">1</span>,
    <span class="re5">interval</span> = 0<span class="re5">.05</span>, <span class="re5">title</span> = <span class="st0">&quot;Visual Illusions: Lilac Chaser&quot;</span>,
    <span class="re5">description</span> = <span class="st0">&quot;Stare at the center cross for a few (say 30) seconds
    to experience the phenomena of the illusion.&quot;</span><span class="br0">&#41;</span>
ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=start"><span class="kw3">start</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>
<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=par"><span class="kw4">par</span></a><span class="br0">&#40;</span><span class="re5">pty</span> = <span class="st0">&quot;s&quot;</span>, <span class="re5">mar</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=rep"><span class="kw3">rep</span></a><span class="br0">&#40;</span><span class="nu0">1</span>, <span class="nu0">4</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=vi"><span class="kw4">vi</span></a>.lilac.chaser<span class="br0">&#40;</span><span class="br0">&#41;</span>
ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=stop"><span class="kw4">stop</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>
ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=options"><span class="kw4">options</span></a><span class="br0">&#40;</span>oopt<span class="br0">&#41;</span></pre>
</div>
<!-- SECTION "Lilac Chaser" [3860-4544] -->
<h2><a name="create_rss_feed_from_a_csv_file" id="create_rss_feed_from_a_csv_file">Create RSS feed from a CSV file</a></h2>
<div class="level2">

<p>

An <acronym title="Rich Site Summary">RSS</acronym> feed is essentially just an <acronym title="Extensible Markup Language">XML</acronym> file, thus the creation is easy just with <code>cat()</code> to write some tags into a text file. The elments of an item in an <acronym title="Rich Site Summary">RSS</acronym> feed usually contains <code>title</code>, <code>link</code>, <code>author</code>, <code>description</code>, <code>pubDate</code>, <code>guid</code>, and <code>category</code>, etc, which are stored in the CSV data file. 
</p>
<pre class="code r"><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=write"><span class="kw4">write</span></a>.rss<span class="br0">&#40;</span><span class="re5">entry</span> = <span class="st0">&quot;http://r.yihui.name/news/rss.csv&quot;</span><span class="br0">&#41;</span></pre>
</div>
<!-- SECTION "Create RSS feed from a CSV file" [4545-] -->