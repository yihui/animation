<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=library"><span class="kw4">library</span></a><span class="br0">&#40;</span><span class="re5">animation</span><span class="br0">&#41;</span>
<span class="co3"># gradient descent works</span>
<span class="re5">oopt</span> = ani.options<span class="br0">&#40;</span><span class="re4"><span class="re5">ani</span></span><span class="re5">.height</span> = <span class="nu0">500</span>, <span class="re4"><span class="re5">ani</span></span><span class="re5">.width</span> = <span class="nu0">500</span>, <span class="re5">outdir</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=getwd"><span class="kw4">getwd</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>, <span class="re5">interval</span> = <span class="nu0">0</span><span class="re5">.<span class="nu0">3</span></span>,
    <span class="re5">nmax</span> = <span class="nu0">50</span>, <span class="re5">title</span> = <span class="st0">"Demonstration of the Gradient Descent Algorithm"</span>,
    <span class="re5">description</span> = <span class="st0">"The arrows will take you to the optimum step by step."</span><span class="br0">&#41;</span>
ani.start<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="re5">f1</span>=<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=function"><span class="kw1">function</span></a><span class="br0">&#40;</span><span class="re5">x</span>,y<span class="br0">&#41;</span> <span class="nu0">25</span>*<span class="re5">x</span>^<span class="nu0">2</span> + <span class="re5">y</span>^<span class="nu0">2</span>
grad.desc<span class="br0">&#40;</span><span class="re5">f1</span>,  <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=c"><span class="kw3">c</span></a><span class="br0">&#40;</span><span class="nu0">-2</span>,<span class="nu0">-2</span>,<span class="nu0">2</span>,<span class="nu0">2</span><span class="br0">&#41;</span>, <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=c"><span class="kw3">c</span></a><span class="br0">&#40;</span><span class="nu0">-1</span>,<span class="nu0">0</span><span class="re5">.<span class="nu0">5</span></span><span class="br0">&#41;</span>, <span class="re5">gamma</span>=<span class="nu0">0</span><span class="re5">.<span class="nu0">1</span></span>, <span class="re5">tol</span> = 1e<span class="nu0">-04</span><span class="br0">&#41;</span>
ani.stop<span class="br0">&#40;</span><span class="br0">&#41;</span>
ani.options<span class="br0">&#40;</span><span class="re5">oopt</span><span class="br0">&#41;</span>
&nbsp;
<span class="co3"># gradient descent fails</span>
<span class="re5">oopt</span> = ani.options<span class="br0">&#40;</span><span class="re4"><span class="re5">ani</span></span><span class="re5">.height</span> = <span class="nu0">480</span>, <span class="re4"><span class="re5">ani</span></span><span class="re5">.width</span> = <span class="nu0">480</span>, <span class="re5">outdir</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=getwd"><span class="kw4">getwd</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>, <span class="re5">interval</span> = <span class="nu0">0</span><span class="re5">.<span class="nu0">2</span></span>,
    <span class="re5">nmax</span> = <span class="nu0">70</span>, <span class="re5">title</span> = <span class="st0">"When Gradient Descent Algorithm Fails"</span>,
    <span class="re5">description</span> = <span class="st0">"This example shows how the gradient descent algorithm will fail with 
    a too large step length."</span><span class="br0">&#41;</span>
ani.start<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="re5">f2</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=function"><span class="kw1">function</span></a><span class="br0">&#40;</span><span class="re5">x</span>, <span class="re5">y</span><span class="br0">&#41;</span> <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=sin"><span class="kw4">sin</span></a><span class="br0">&#40;</span><span class="nu0">1</span>/<span class="nu0">2</span> * <span class="re5">x</span>^<span class="nu0">2</span> - <span class="nu0">1</span>/<span class="nu0">4</span> * <span class="re5">y</span>^<span class="nu0">2</span> + <span class="nu0">3</span><span class="br0">&#41;</span> *
    <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=cos"><span class="kw4">cos</span></a><span class="br0">&#40;</span><span class="nu0">2</span> * <span class="re5">x</span> + <span class="nu0">1</span> - <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=exp"><span class="kw4">exp</span></a><span class="br0">&#40;</span><span class="re5">y</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
grad.desc<span class="br0">&#40;</span><span class="re5">f2</span>, <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=c"><span class="kw3">c</span></a><span class="br0">&#40;</span><span class="nu0">-2</span>, <span class="nu0">-2</span>, <span class="nu0">2</span>, <span class="nu0">2</span><span class="br0">&#41;</span>, <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=c"><span class="kw3">c</span></a><span class="br0">&#40;</span><span class="nu0">-1</span>, <span class="nu0">0</span><span class="re5">.<span class="nu0">5</span></span><span class="br0">&#41;</span>, <span class="re5">gamma</span> = <span class="nu0">0</span><span class="re5">.<span class="nu0">3</span></span>, <span class="re5">tol</span> = 1e<span class="nu0">-04</span><span class="br0">&#41;</span>
ani.stop<span class="br0">&#40;</span><span class="br0">&#41;</span>
ani.options<span class="br0">&#40;</span><span class="re5">oopt</span><span class="br0">&#41;</span>