


<h1><a name="r_package_animation" id="r_package_animation">R Package &#039;&#039;animation&#039;&#039;</a></h1>
<div class="level1">

<p>

This package consists of various functions for animations in statistics, covering many areas such as probability theory, mathematical statistics, multivariate statistics, nonparametric statistics, sampling survey, linear models, time series, computational statistics, data mining and machine learning. These functions might be of help in teaching statistics and data analysis.
</p>

</div>
<!-- SECTION "R Package ''animation''" [1-417] -->
<h2><a name="motivation" id="motivation">Motivation</a></h2>
<div class="level2">

<p>

There is at least one significant difference between the disciplines of pure mathematics and statistics: usually statistics can be imagined in a very practical way, while it is not always true for mathematics. For example, everyone can imagine why <em>k</em>-Nearest Neighbor technique works, but perhaps not everyone can imagine why <em>Taylor expansion</em> technique works, although we can <em>prove</em> it!
</p>

<p>
Thus an <code>animation</code> package is written – just for better understanding of statistical techniques and data analysis. 
</p>

</div>
<!-- SECTION "Motivation" [418-961] -->
<h2><a name="download" id="download">Download</a></h2>
<div class="level2">

<p>

This package <code>animation</code> is available on CRAN now; the source code as well as the Windows binary can be downloaded at:
</p>

<p>
<a href="http://cran.r-project.org/web/packages/animation/index.html" class="urlextern" target="_blank" title="http://cran.r-project.org/web/packages/animation/index.html"  rel="nofollow">http://cran.r-project.org/web/packages/animation/index.html</a>
</p>

<p>
You may install by <code>R CMD INSTALL</code> after downloading the source or simply use <code>install.packages()</code> in R:
</p>
<pre class="code r"><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=install.packages"><span class="kw2">install.packages</span></a><span class="br0">&#40;</span><span class="st0">&quot;animation&quot;</span><span class="br0">&#41;</span></pre>
</div>
<!-- SECTION "Download" [962-1330] -->
<h2><a name="usage" id="usage">Usage</a></h2>
<div class="level2">

<p>

Watching animations either inside R (in windows graphics devices) or outside R (in <acronym title="HyperText Markup Language">HTML</acronym> pages) are OK:

</p>
<ol>
<li class="level1"><div class="li"> Inside R: just type the animation functions in the console, and watch the animations in an R windows graphics device. Usually we don&#039;t need to provide any argument values because all there are default ones for demonstration purposes. The time interval for animations can be set in <code><a href="/animation:options" class="wikilink1" title="animation:options">ani.options()</a></code> (the <code>interval</code> argument).</div>
</li>
<li class="level1"><div class="li"> Outside R: the package has also provided a way to create <acronym title="HyperText Markup Language">HTML</acronym> output containing the animations. You may use the function <code><a href="/animation:options" class="wikilink1" title="animation:options">ani.options()</a></code> to specify a series of parameters to control the output, e.g. <code>ani.dev</code> to select an R graphics devices such as <code>png</code>, <code>jpeg</code>, etc; <code>ani.width</code> and <code>ani.height</code> to specify the width and height of image frames. Then call <code>ani.start()</code>, an animation function and <code>ani.stop()</code> to produce the <acronym title="HyperText Markup Language">HTML</acronym> animation output.</div>
</li>
</ol>

<p>

For further information, please check corresponding help pages or <a href="/animation:create_html_animation_page" class="wikilink1" title="animation:create_html_animation_page">learn how the HTML pages are created</a>. 
</p>

</div>
<!-- SECTION "Usage" [1331-2417] -->
<h2><a name="method" id="method">Method</a></h2>
<div class="level2">

<p>

How to generate an animation sequence and save it?
</p>

</div>
<!-- SECTION "Method" [2418-2489] -->
<h3><a name="generate_an_animation_sequence" id="generate_an_animation_sequence">Generate an animation sequence</a></h3>
<div class="level3">

<p>

The animation method behind the package is quite naive and intuitive; here is an example showing how it works:
</p>
<pre class="code r"><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=for"><span class="kw1">for</span></a> <span class="br0">&#40;</span>i <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=in"><span class="kw1">in</span></a> <span class="nu0">1</span>:<span class="nu0">360</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=plot"><span class="kw3">plot</span></a><span class="br0">&#40;</span><span class="nu0">1</span>, <span class="re5">ann</span> = <span class="re5">F</span>, <span class="re5">type</span> = <span class="st0">&quot;n&quot;</span>, <span class="re5">axes</span> = F<span class="br0">&#41;</span>
    <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=text"><span class="kw3">text</span></a><span class="br0">&#40;</span><span class="nu0">1</span>, <span class="nu0">1</span>, <span class="st0">&quot;Animation&quot;</span>, <span class="re5">srt</span> = <span class="re5">i</span>, <span class="re5">col</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=rainbow"><span class="kw4">rainbow</span></a><span class="br0">&#40;</span><span class="nu0">360</span><span class="br0">&#41;</span><span class="br0">&#91;</span>i<span class="br0">&#93;</span>, <span class="re5">cex</span> = <span class="nu0">7</span> * 
        i/<span class="nu0">360</span><span class="br0">&#41;</span>
    <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=Sys.sleep"><span class="kw2">Sys.sleep</span></a><span class="br0">&#40;</span><span class="nu0">0.01</span><span class="br0">&#41;</span>
<span class="br0">&#125;</span></pre>
<p>
The above R code will produce an animation like this:
</p>

<p>
<a href="/_detail/animation:animation_rotation.gif?id=animation%3Astart" class="media" title="animation:animation_rotation.gif"><img src="/_media/animation:animation_rotation.gif" class="mediacenter" title="The rotation animation of the word &quot;Animation&quot;" alt="The rotation animation of the word &quot;Animation&quot;" /></a>
</p>

<p>
Almost all of the animation functions in the package just follow this kind of loop to produce a sequence of image frames.
</p>

</div>
<!-- SECTION "Generate an animation sequence" [2490-3098] -->
<h3><a name="a_general_schema" id="a_general_schema">A General Schema</a></h3>
<div class="level3">

<p>

Here is the pseudo code for the general schema used in the package:
</p>
<pre class="code r"><span class="co3">#---------------------------------------------------------------------------#</span>
<span class="co3"># Some parameters in 'ani.options()' such as 'nmax' and 'interval' have been</span>
<span class="co3">#   appropriately set beforehand;</span>
<span class="co3">#---------------------------------------------------------------------------#</span>
ani<span class="re5">.fun</span> &lt;- <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=function"><span class="kw1">function</span></a><span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=args"><span class="kw4">args</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=for"><span class="kw1">for</span></a>.stat<span class="re5">.method</span>, <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=args"><span class="kw4">args</span></a>.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=for"><span class="kw1">for</span></a><span class="re5">.graphics</span>, ...<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="br0">&#123;</span>stat.calculation.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=for"><span class="kw1">for</span></a>.preparation.here<span class="br0">&#125;</span>
    <span class="re5">i</span> = <span class="nu0">1</span>
    <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=while"><span class="kw1">while</span></a> <span class="br0">&#40;</span><span class="re5">i</span> &lt;= ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=options"><span class="kw4">options</span></a><span class="br0">&#40;</span><span class="st0">&quot;nmax&quot;</span><span class="br0">&#41;</span> &amp; other.conditions.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=for"><span class="kw1">for</span></a>.stat.method<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="br0">&#123;</span>stat.calculation.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=for"><span class="kw1">for</span></a>.animation<span class="br0">&#125;</span>
        <span class="br0">&#123;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=plot"><span class="kw3">plot</span></a>.results.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=in"><span class="kw1">in</span></a>.ith.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=step"><span class="kw4">step</span></a><span class="br0">&#125;</span>
        <span class="co3"># pause for a while in this step</span>
        <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=Sys.sleep"><span class="kw2">Sys.sleep</span></a><span class="br0">&#40;</span>ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=options"><span class="kw4">options</span></a><span class="br0">&#40;</span><span class="st0">&quot;interval&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
        <span class="re5">i</span> = i + <span class="nu0">1</span>
    <span class="br0">&#125;</span>
    <span class="co3"># (i - 1) frames produced in the loop</span>
    ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=options"><span class="kw4">options</span></a><span class="br0">&#40;</span><span class="st0">&quot;nmax&quot;</span><span class="br0">&#41;</span> = i - <span class="nu0">1</span>
    <span class="br0">&#123;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=return"><span class="kw4">return</span></a>.something<span class="br0">&#125;</span>
<span class="br0">&#125;</span>
<span class="co3">#---------------------------------------------------------------------------#</span>
<span class="co3"># To produce an HTML animation page, use 'ani.start(...)'; then </span>
<span class="co3"># 'ani.fun(...)'; use 'ani.stop(...)' to complete the HTML page.</span>
<span class="co3">#---------------------------------------------------------------------------#</span>
<span class="co3"># To produce GIF/MPEG animations, use 'saveMovie(ani.fun(...), ...)';</span>
<span class="co3">#---------------------------------------------------------------------------#</span>
<span class="co3"># To produce Flash animations, use 'saveSWF(ani.fun(...), ...))';</span>
<span class="co3">#---------------------------------------------------------------------------#</span></pre>
<p>
What should be noted here is: the actual number of image frames might not be equal to the <code>nmax</code> set in <code>ani.options()</code> before, because <code>nmax</code> is not the sole condition to break the loop; sometimes a statistical method may have other conditions such as a threshold for error, etc. That&#039;s why we have to reset the <code>nmax</code> parameter in the end<sup><a href="#fn__1" name="fnt__1" id="fnt__1" class="fn_top">1)</a></sup>.
</p>

</div>
<!-- SECTION "A General Schema" [3099-4995] -->
<h3><a name="create_an_html_page_for_animation" id="create_an_html_page_for_animation">Create an HTML page for animation</a></h3>
<div class="level3">

<p>

The animation in the <acronym title="HyperText Markup Language">HTML</acronym> pages is actually driven by <acronym title="JavaScript">JS</acronym>. For more details, please refer to <a href="/animation:create_html_animation_page" class="wikilink1" title="animation:create_html_animation_page">the method to create an HTML animation page</a>. To generate animations in this wiki, you should read the <a href="/wiki:animation_example" class="wikilink1" title="wiki:animation_example">HTML animation examples</a> and the <a href="/wiki:animation_plugin" class="wikilink1" title="wiki:animation_plugin">animation plugin for Dokuwiki</a>.
</p>

</div>
<!-- SECTION "Create an HTML page for animation" [4996-5382] -->
<h3><a name="create_gif_animations" id="create_gif_animations">Create GIF animations</a></h3>
<div class="level3">

<p>

The package has also provided a wrapper to generate <acronym title="Graphics Interchange Format">GIF</acronym> animations together with <a href="http://www.imagemagick.org" class="urlextern" target="_blank" title="http://www.imagemagick.org"  rel="nofollow">ImageMagic</a>. The method is even easier; we merely need to write some code which can produce a sequence of images, and the rest work will be done by the function <code>saveMovie()</code> in the package. See <a href="#gif_animation" title="animation:start &crarr;" class="wikilink1">the example below</a> in the “Examples” section. (Actually the <acronym title="Graphics Interchange Format">GIF</acronym> animation above is just made by this function.)
</p>

</div>
<!-- SECTION "Create GIF animations" [5383-5854] -->
<h3><a name="create_flash_animations" id="create_flash_animations">Create Flash animations</a></h3>
<div class="level3">

<p>

The <a href="http://www.swftools.org/" class="urlextern" target="_blank" title="http://www.swftools.org/"  rel="nofollow">SWF Tools</a> a collection of SWF manipulation and creation utilities written by Rainer Böhme and Matthias Kramm, and the package <code>animation</code> has also provided a wrapper <code>saveSWF()</code> to generate Flash animations with the help of these tools. Currently three graphics devices are available for producing Flash animations: <code>png</code>, <code>jpeg</code> and <code>pdf</code>. There is also <a href="#flash_animation" title="animation:start &crarr;" class="wikilink1">an example below</a>.
</p>

</div>
<!-- SECTION "Create Flash animations" [5855-6328] -->
<h2><a name="examples" id="examples">Examples</a></h2>
<div class="level2">

<p>

Currently we can directly use the functions in the package to produce animations, or we can also define animation functions for ourselves.
</p>

</div>
<!-- SECTION "Examples" [6329-6490] -->
<h3><a name="use_internal_functions" id="use_internal_functions">Use internal functions</a></h3>
<div class="level3">
<pre class="code r"><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=library"><span class="kw4">library</span></a><span class="br0">&#40;</span>animation<span class="br0">&#41;</span>
&nbsp;
<span class="co3"># inside R: windows graphics device</span>
<span class="re5">oopt</span> = ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=options"><span class="kw4">options</span></a><span class="br0">&#40;</span><span class="re5">interval</span> = 0<span class="re5">.05</span>, <span class="re5">nmax</span> = <span class="nu0">150</span><span class="br0">&#41;</span>
brownian.motion<span class="br0">&#40;</span><span class="re5">n</span> = <span class="nu0">15</span>, <span class="re5">pch</span> = <span class="nu0">21</span>, <span class="re5">cex</span> = <span class="nu0">5</span>, <span class="re5">col</span> = <span class="st0">&quot;red&quot;</span>, <span class="re5">bg</span> = <span class="st0">&quot;yellow&quot;</span><span class="br0">&#41;</span>
ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=options"><span class="kw4">options</span></a><span class="br0">&#40;</span>oopt<span class="br0">&#41;</span>
&nbsp;
<span class="co3"># outside R: create an HTML animation page</span>
<span class="re5">oopt</span> = ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=options"><span class="kw4">options</span></a><span class="br0">&#40;</span><span class="re5">interval</span> = 0<span class="re5">.05</span>, <span class="re5">nmax</span> = <span class="nu0">100</span>, 
    <span class="re5">title</span> = <span class="st0">&quot;Demonstration of Brownian Motion&quot;</span>,
    <span class="re5">description</span> = <span class="st0">&quot;Random walk on the 2D plane: for each point (x, y), 
    x = x + rnorm(1) and y = y + rnorm(1).&quot;</span><span class="br0">&#41;</span>
ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=start"><span class="kw3">start</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="re5">opar</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=par"><span class="kw4">par</span></a><span class="br0">&#40;</span><span class="re5">mar</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=c"><span class="kw3">c</span></a><span class="br0">&#40;</span><span class="nu0">3</span>, <span class="nu0">3</span>, <span class="nu0">1</span>, <span class="nu0">0.5</span><span class="br0">&#41;</span>, <span class="re5">mgp</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=c"><span class="kw3">c</span></a><span class="br0">&#40;</span><span class="nu0">2</span>, <span class="re5">.5</span>, 0<span class="br0">&#41;</span>, <span class="re5">tcl</span> = -0<span class="re5">.3</span>,
    cex<span class="re5">.axis</span> = 0<span class="re5">.8</span>, cex<span class="re5">.lab</span> = 0<span class="re5">.8</span>, cex<span class="re5">.main</span> = <span class="nu0">1</span><span class="br0">&#41;</span>
brownian.motion<span class="br0">&#40;</span><span class="re5">pch</span> = <span class="nu0">21</span>, <span class="re5">cex</span> = <span class="nu0">5</span>, <span class="re5">col</span> = <span class="st0">&quot;red&quot;</span>, <span class="re5">bg</span> = <span class="st0">&quot;yellow&quot;</span><span class="br0">&#41;</span>
<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=par"><span class="kw4">par</span></a><span class="br0">&#40;</span>opar<span class="br0">&#41;</span>
ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=stop"><span class="kw4">stop</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>
ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=options"><span class="kw4">options</span></a><span class="br0">&#40;</span>oopt<span class="br0">&#41;</span></pre>
<p>
Check the page <a href="/prob:brownian_motion" class="wikilink1" title="prob:brownian_motion">Brownian Motion (Random Walk)</a> to see the results.
</p>

</div>
<!-- SECTION "Use internal functions" [6491-7312] -->
<h3><a name="define_custom_functions" id="define_custom_functions">Define custom functions</a></h3>
<div class="level3">

<p>

The following code has explained how to define animation functions for yourself (please read <span class="curid"><a href="/animation:start#a_general_schema" class="wikilink1" title="animation:start">the general schema</a></span> above first):
</p>
<pre class="code r"><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=library"><span class="kw4">library</span></a><span class="br0">&#40;</span>animation<span class="br0">&#41;</span>
<span class="co3"># define an animation function to show the jitter effect</span>
<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=jitter"><span class="kw4">jitter</span></a><span class="re5">.ani</span> &lt;- <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=function"><span class="kw1">function</span></a><span class="br0">&#40;</span><span class="re5">amount</span> = 0<span class="re5">.2</span>, ...<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="re5">x</span> &lt;- <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=sample"><span class="kw4">sample</span></a><span class="br0">&#40;</span><span class="nu0">3</span>, <span class="nu0">300</span>, <span class="re1">TRUE\</span>, <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=c"><span class="kw3">c</span></a><span class="br0">&#40;</span>0<span class="re5">.1</span>, 0<span class="re5">.6</span>, <span class="nu0">0.3</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
    <span class="re5">y</span> &lt;- <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=sample"><span class="kw4">sample</span></a><span class="br0">&#40;</span><span class="nu0">3</span>, <span class="nu0">300</span>, <span class="re1">TRUE\</span>, <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=c"><span class="kw3">c</span></a><span class="br0">&#40;</span>0<span class="re5">.7</span>, 0<span class="re5">.2</span>, <span class="nu0">0.1</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
    <span class="re5">i</span> &lt;- <span class="nu0">1</span>
    <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=while"><span class="kw1">while</span></a> <span class="br0">&#40;</span><span class="re5">i</span> &lt;= ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=options"><span class="kw4">options</span></a><span class="br0">&#40;</span><span class="st0">&quot;nmax&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=plot"><span class="kw3">plot</span></a><span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=jitter"><span class="kw4">jitter</span></a><span class="br0">&#40;</span><span class="re5">x</span>, <span class="re5">amount</span> = amount<span class="br0">&#41;</span>, <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=jitter"><span class="kw4">jitter</span></a><span class="br0">&#40;</span><span class="re5">y</span>, <span class="re5">amount</span> = amount<span class="br0">&#41;</span>, 
            <span class="re5">xlim</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=c"><span class="kw3">c</span></a><span class="br0">&#40;</span>0<span class="re5">.5</span>, <span class="nu0">3.5</span><span class="br0">&#41;</span>, <span class="re5">ylim</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=c"><span class="kw3">c</span></a><span class="br0">&#40;</span>0<span class="re5">.5</span>, <span class="nu0">3.5</span><span class="br0">&#41;</span>, <span class="re5">xlab</span> = <span class="st0">&quot;jittered x&quot;</span>, 
            <span class="re5">ylab</span> = <span class="st0">&quot;jittered y&quot;</span>, panel<span class="re5">.first</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=grid"><span class="kw4">grid</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>, ...<span class="br0">&#41;</span>
        <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=points"><span class="kw3">points</span></a><span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=rep"><span class="kw3">rep</span></a><span class="br0">&#40;</span><span class="nu0">1</span>:<span class="nu0">3</span>, <span class="nu0">3</span><span class="br0">&#41;</span>, <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=rep"><span class="kw3">rep</span></a><span class="br0">&#40;</span><span class="nu0">1</span>:<span class="nu0">3</span>, <span class="re5">each</span> = <span class="nu0">3</span><span class="br0">&#41;</span>, <span class="re5">cex</span> = <span class="nu0">3</span>, <span class="re5">pch</span> = <span class="nu0">19</span><span class="br0">&#41;</span>
        <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=Sys.sleep"><span class="kw2">Sys.sleep</span></a><span class="br0">&#40;</span>ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=options"><span class="kw4">options</span></a><span class="br0">&#40;</span><span class="st0">&quot;interval&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
        <span class="re5">i</span> &lt;- i + <span class="nu0">1</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span> 
ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=start"><span class="kw3">start</span></a><span class="br0">&#40;</span><span class="re5">nmax</span> = <span class="nu0">30</span>, <span class="re5">interval</span> = 0<span class="re5">.5</span>, <span class="re5">title</span> = <span class="st0">&quot;Jitter Effect&quot;</span><span class="br0">&#41;</span>
<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=par"><span class="kw4">par</span></a><span class="br0">&#40;</span><span class="re5">mar</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=c"><span class="kw3">c</span></a><span class="br0">&#40;</span><span class="nu0">5</span>, <span class="nu0">4</span>, <span class="nu0">1</span>, <span class="nu0">0.5</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=jitter"><span class="kw4">jitter</span></a>.ani<span class="br0">&#40;</span><span class="br0">&#41;</span>
ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=stop"><span class="kw4">stop</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span></pre>
<p>
To see the animation effects, please visit the <a href="/animation:example_jitter_effect" class="wikilink1" title="animation:example_jitter_effect">example page for jitter effect</a>.
</p>

</div>
<!-- SECTION "Define custom functions" [7313-8357] -->
<h3><a name="gif_animation" id="gif_animation">GIF animation</a></h3>
<div class="level3">

<p>

Following the above example, we pass an expression to the function <code>saveMovie()</code> to create a similar animation:
</p>
<pre class="code r"><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=library"><span class="kw4">library</span></a><span class="br0">&#40;</span>animation<span class="br0">&#41;</span>
saveMovie<span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=jitter"><span class="kw4">jitter</span></a>.ani<span class="br0">&#40;</span><span class="br0">&#41;</span>, <span class="re5">interval</span> = 0<span class="re5">.5</span>, <span class="re5">outdir</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=getwd"><span class="kw4">getwd</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span></pre>
</div>
<!-- SECTION "GIF animation" [8358-8593] -->
<h3><a name="flash_animation" id="flash_animation">Flash animation</a></h3>
<div class="level3">

<p>

Here is a Flash animation example for the kNN algorithm: 
</p>
<pre class="code r"><span class="re5">oopt</span> = ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=options"><span class="kw4">options</span></a><span class="br0">&#40;</span><span class="re5">interval</span> = 0, <span class="re5">nmax</span> = <span class="nu0">50</span><span class="br0">&#41;</span>
saveSWF<span class="br0">&#40;</span>knn.ani<span class="br0">&#40;</span><span class="re5">test</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=matrix"><span class="kw4">matrix</span></a><span class="br0">&#40;</span><a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=rnorm"><span class="kw4">rnorm</span></a><span class="br0">&#40;</span><span class="nu0">16</span><span class="br0">&#41;</span>, <span class="re5">ncol</span> = <span class="nu0">2</span><span class="br0">&#41;</span>, 
    cl<span class="re5">.pch</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=c"><span class="kw3">c</span></a><span class="br0">&#40;</span><span class="nu0">16</span>, <span class="nu0">2</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <span class="nu0">1</span><span class="re5">.5</span>, <span class="re5">dev</span> = <span class="st0">&quot;png&quot;</span>, <span class="re5">para</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=list"><span class="kw4">list</span></a><span class="br0">&#40;</span><span class="re5">mar</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=c"><span class="kw3">c</span></a><span class="br0">&#40;</span><span class="nu0">3</span>, 
    <span class="nu0">3</span>, <span class="nu0">1</span>, <span class="nu0">1.5</span><span class="br0">&#41;</span>, <span class="re5">mgp</span> = <a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=c"><span class="kw3">c</span></a><span class="br0">&#40;</span><span class="nu0">1</span><span class="re5">.5</span>, 0<span class="re5">.5</span>, 0<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
ani.<a target="_blank"  href="http://wiki.r-project.org/rwiki/rhelp.php?id=options"><span class="kw4">options</span></a><span class="br0">&#40;</span>oopt<span class="br0">&#41;</span></pre>
<p>
<!--[if !IE]> -->
<object class="media" width="480" height="480" type="application/x-shockwave-flash" data="/_media/animation:knn_flash.swf" >
<!-- <![endif]-->
<!--[if IE]>
<object class="media" width="480" height="480" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" >
    <param name="movie" value="/_media/animation:knn_flash.swf" />
<!--><!-- -->
  <param name="quality" value="high" />
Flash animation for the k-NN algorithm
</object>
<!-- <![endif]-->

</p>

<p>
Be sure your browser has the Flash plugin to view Flash animations.
</p>

</div>
<!-- SECTION "Flash animation" [8594-9064] -->
<h2><a name="changes" id="changes">Changes</a></h2>
<div class="level2">

<p>

See the <a href="/lib/exe/fetch.php?media=http%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fanimation%2FNEWS" class="media mediafile mf_" title="http://cran.r-project.org/web/packages/animation/NEWS">NEWS</a> file of the package. There are significant changes since version 1.0-0 (it has been submitted to CRAN); if you wish to know more about the old versions, please read the page <a href="/animation:version_0.2-0" class="wikilink1" title="animation:version_0.2-0">package &#039;&#039;animation&#039;&#039; prior to 1.0-0</a>.
</p>

</div>
<!-- SECTION "Changes" [9065-9387] -->
<h2><a name="future_plans" id="future_plans">Future Plans</a></h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> To include more interesting examples to demonstrate statistical theories</div>
</li>
<li class="level1"><div class="li"> Introduce <em>interactivity</em> of animations in the web using services like <a href="http://rweb.stat.umn.edu/Rweb" class="urlextern" target="_blank" title="http://rweb.stat.umn.edu/Rweb"  rel="nofollow">Rweb</a>.</div>
</li>
<li class="level1"><div class="li"> Try to make 3D animations with other packages such as <a href="http://cran.r-project.org/package=rgl" class="urlextern" target="_blank" title="http://cran.r-project.org/package=rgl"  rel="nofollow">&#039;&#039;rgl&#039;&#039;</a></div>
</li>
<li class="level1"><div class="li"> Learn other dynamic graphics systems such as <a href="http://www.ggobi.org" class="urlextern" target="_blank" title="http://www.ggobi.org"  rel="nofollow">&#039;&#039;GGobi&#039;&#039;</a></div>
</li>
<li class="level1"><div class="li"> Introduce a <acronym title="Graphical User Interface">GUI</acronym> written in <a href="http://www.gtk.org" class="urlextern" target="_blank" title="http://www.gtk.org"  rel="nofollow">&#039;&#039;GTK+&#039;&#039;</a> (R package <a href="http://cran.r-project.org/package=RGtk2" class="urlextern" target="_blank" title="http://cran.r-project.org/package=RGtk2"  rel="nofollow">&#039;&#039;RGtk2&#039;&#039;</a>), or <code>tcltk</code>, etc</div>
</li>
</ul>

</div>
<!-- SECTION "Future Plans" [9388-9948] -->
<h2><a name="misc" id="misc">Misc</a></h2>
<div class="level2">

<p>

I have included some miscellaneous functions in this package too, which may (may not) have something (anything) to do with animations. If you are interested, please read <a href="/animation:misc" class="wikilink1" title="animation:misc">this page</a>.
</p>

</div>
<!-- SECTION "Misc" [9949-] --><div class="footnotes">
<div class="fn"><sup><a href="#fnt__1" id="fn__1" name="fn__1" class="fn_bot">1)</a></sup> 
in the case when <code>nmax</code> is exactly the number of animation frames, we don&#039;t need to reset this option</div>
</div>
